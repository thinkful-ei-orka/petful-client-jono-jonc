(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{23:function(e,t,n){e.exports=n(34)},24:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);n(24);var o=n(0),a=n.n(o),r=n(19),c=n.n(r),l=n(22),i=n(5),s=n(6),u=n(8),d=n(7),m=n(9),p=n(12),h=n(10),f="https://petful-server-jono-jonc.herokuapp.com/",g=a.a.createContext({userName:"",isLoading:!0,people:[],canAdopt:!1}),E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).componentDidMount=function(){n.context.getPet(),console.log(n.context)},n.componentWillUnmount=function(){clearTimeout(n.context.timerId)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.context.isLoading?a.a.createElement("div",null,"Loading"):this.context.isCatAdopted?a.a.createElement("div",{className:"cat-display is-adpoted"},a.a.createElement("h1",null,"Was Adopted"),a.a.createElement("p",null,"New cat incoming")):a.a.createElement("div",{className:"cat-display"},a.a.createElement("h2",null,"Cat"),a.a.createElement("img",{src:this.context.pets.cat.imageURL,alt:"Cat"}),a.a.createElement("p",null,a.a.createElement("strong",null,"Name:")," ",this.context.pets.cat.name),a.a.createElement("p",null,a.a.createElement("strong",null,"Gender:")," ",this.context.pets.cat.gender),a.a.createElement("p",null,a.a.createElement("strong",null,"Age:")," ",this.context.pets.cat.age," yrs"),a.a.createElement("p",null,a.a.createElement("strong",null,"Breed:")," ",this.context.pets.cat.breed),a.a.createElement("p",null,a.a.createElement("strong",null,"Fluffy's story:")," ",this.context.pets.cat.story),a.a.createElement("button",{className:this.context.isNextInline?"":"hidden",onClick:this.context.handleCatAdoptButton},"Adopt"))}}]),t}(a.a.Component);E.contextType=g;var x=E,v=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={dog:null,isLoading:!0,isAdopted:!1},n.componentDidMount=function(){n.context.getPet(),console.log(n.context)},n.componentWillUnmount=function(){clearTimeout(n.context.timerId)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.context.isLoading?a.a.createElement("div",null):this.context.isDogAdopted?a.a.createElement("div",{className:"dog-display is-adpoted"},a.a.createElement("h1",null,"Was Adopted"),a.a.createElement("p",null,"New dog incoming")):a.a.createElement("div",{className:"dog-display"},a.a.createElement("h2",null,"Dog"),a.a.createElement("img",{src:this.context.pets.dog.imageURL,alt:"Dog"}),a.a.createElement("p",null,a.a.createElement("strong",null,"Name:")," ",this.context.pets.dog.name," "),a.a.createElement("p",null,a.a.createElement("strong",null,"Gender:")," ",this.context.pets.dog.gender," "),a.a.createElement("p",null,a.a.createElement("strong",null,"Age:")," ",this.context.pets.dog.age," yrs"),a.a.createElement("p",null,a.a.createElement("strong",null,"Breed:")," ",this.context.pets.dog.breed," "),a.a.createElement("p",null,a.a.createElement("strong",null,"Fluffy's story:")," ",this.context.pets.dog.story," "),a.a.createElement("button",{className:this.context.isNextInline?"":"hidden",onClick:this.context.handleDogAdoptButton},"Adopt"))}}]),t}(a.a.Component);v.contextType=g;var b=v;var y=function(e){var t=Object(o.useContext)(g),n=function(e){var t={name:e},n=JSON.stringify(t);fetch("".concat(f,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:n}).catch((function(e){console.error({error:e})}))};return console.log(t.userName),a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{className:"add-person-form",onSubmit:function(e){return function(e){e.preventDefault();var o=e.target.userName.value;e.target.userName.value="",t.setContext({userName:o,isInline:!0}),n(o)}(e)}},a.a.createElement("label",{htmlFor:"userName"},"Your Name:"),a.a.createElement("input",{type:"text",name:"userName",required:!0}),a.a.createElement("button",{type:"submit"},"Get in Line")))};function N(){return Math.floor(2*Math.random())}var A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).listProcess=function(){0==n.context.isNextInline&&(n.timerId1=setInterval((function(){return n.postPersonToLine()}),5e3),n.timerId2=setInterval((function(){return n.removePerson()}),5e3))},n.clearTimers=function(){clearInterval(n.timerId1),clearInterval(n.timerId2),clearInterval(n.timerId3)},n.componentWillUnmount=function(){n.clearTimers(),console.log("component unmounted")},n.randomAdoption=function(){N();1==N()?(n.context.handleDogAdoptButton(),console.log(N())):(n.context.handleCatAdoptButton(),console.log(N()))},n.removePerson=function(){return fetch("".concat(f,"/people"),{method:"DELETE"}).then((function(){0!=n.context.isNextInline||n.timerId1||n.listProcess(),n.randomAdoption(),n.getPeople()}))},n.postPersonToLine=function(){var e=Math.floor(50*Math.random()),t={name:"Test".concat(e)},n=JSON.stringify(t);fetch("".concat(f,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:n}).catch((function(e){console.error({error:e})}))},n.getPeople=function(){return fetch("".concat(f,"/people")).then((function(e){return e.json()})).then((function(e){e[0]===n.context.userName&&(n.clearTimers(),n.context.setContext({isNextInline:!0})),n.context.setContext({people:e,isLoading:!1})}))},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.listProcess()}},{key:"render",value:function(){return console.log(this.context.userName),console.log(this.context.people),this.context.isLoading?a.a.createElement("div",null,"loading..."):a.a.createElement(a.a.Fragment,null,a.a.createElement("ol",null,this.context.people.map((function(e){return a.a.createElement("li",{key:e},e)}))),a.a.createElement(y,null))}}]),t}(a.a.Component);A.contextType=g;var C=function(e){return a.a.createElement("div",{className:"home-page"},a.a.createElement("p",{className:"welcome-message"}," ","Welcome to Petful! Our adoption process is a bit different. As you move to the adoption page and submit your name you will be added to the back of the line. You will see one dog and one cat on the screen. As a pet gets adopted they will be removed from the screen and replaced with a new one. At this point you will be moved forward in the line. Once you reach the front of the line it is your turn to adopt! You will have the option to adopt either animal you see or both!"),a.a.createElement("div",{className:"image-container"}),a.a.createElement("button",{className:"get-started-button",onClick:function(){e.history.push("/adoption")}},"Get Started!"))},I=function(){return fetch("".concat(f,"/pets")).then((function(e){return e.json()}))},j=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={isLoading:!0,people:[],userName:"",pets:[],isInline:!1,isNextInline:!1,isDogAdopted:!1,isCatAdopted:!1},n.setContext=function(e){n.setState(e)},n.getPetHandler=function(){I().then((function(e){n.setContext({pets:e,isLoading:!1,isDogAdopted:!1,isCatAdopted:!1})}))},n.getPeople=function(){return fetch("".concat(f,"/people")).then((function(e){return e.json()})).then((function(e){e[0]===n.context.userName&&(n.clearTimers(),n.setContext({isNextInline:!0})),n.setContext({people:e,isLoading:!1,isNextInline:!1})}))},n.removeMe=function(){return fetch("".concat(f,"/people"),{method:"DELETE"})},n.adoptDogButtonHandler=function(){return fetch("".concat(f,"/pets/dog"),{method:"DELETE"}).then((function(){n.setContext({isDogAdopted:!0}),n.timerId=setTimeout((function(){n.getPetHandler()}),2e3),1==n.state.isNextInline&&n.removeMe().then((function(){return n.getPeople()}))})).catch((function(e){console.error({error:e})}))},n.adoptCatButtonHandler=function(){return fetch("".concat(f,"/pets/cat"),{method:"DELETE"}).then((function(){n.setContext({isCatAdopted:!0}),n.timerId=setTimeout((function(){n.getPetHandler()}),2e3),1==n.state.isNextInline&&n.removeMe().then((function(){return n.getPeople()}))})).catch((function(e){console.error({error:e})}))},n.adoptBothButtonHandler=function(){return fetch("".concat(f,"/pets/both"),{method:"DELETE"}).then((function(){n.setContext({isCatAdopted:!0,isDogAdopted:!0}),n.timerId=setTimeout((function(){n.getPetHandler()}),2e3),1==n.state.isNextInline&&n.removeMe().then((function(){return n.getPeople()}))})).catch((function(e){console.error({error:e})}))},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=Object(l.a)({},this.state,{getPet:this.getPetHandler,adoptButtonHandler:this.adoptButtonHandler,setContext:this.setContext,handleDogAdoptButton:this.adoptDogButtonHandler,handleCatAdoptButton:this.adoptCatButtonHandler,removePeople:this.removePeople,postPersonToLine:this.postPersonToLine});return a.a.createElement(g.Provider,{value:t},a.a.createElement("div",null,a.a.createElement(p.b,{to:"/",className:"home-link"},a.a.createElement("h1",null,"Petful")),a.a.createElement(h.a,{path:"/",component:C,exact:!0}),a.a.createElement(h.a,{path:"/adoption",render:function(){return a.a.createElement("div",null,a.a.createElement("div",{className:"adoption-line"},a.a.createElement(A,null)),a.a.createElement("div",{className:"adoption"},a.a.createElement(x,null),a.a.createElement(b,null)),a.a.createElement("div",{className:e.state.isNextInline?"":"hidden"},a.a.createElement("h2",{className:"adopt-both"},"Be a hero, adopt both!"),a.a.createElement("button",{className:"adopt-both-button",onClick:function(){return e.adoptBothButtonHandler()}},"Adopt Both")))}})))}}]),t}(a.a.Component),P=Object(h.e)(j);c.a.render(a.a.createElement(p.a,null,a.a.createElement(P,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.2cfdfa55.chunk.js.map